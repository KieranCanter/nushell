Most of this is directly from [echasnovski's config](https://github.com/echasnovski/dotfiles/tree/master/nushell/.config/nushell).
